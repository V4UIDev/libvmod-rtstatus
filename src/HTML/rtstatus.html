<title>Twitter Bootstrap 3 Fixed Layout Example</title>
<link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">
<link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap-theme.min.css">
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
<script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>
<script type="text/javascript" src="http://code.jquery.com/jquery-1.4.2.min.js"></script>
<style type="text/css">
  p  {white-space: pre;}
  .col-xs-12  {
padding-top: 20%;
}
</style>
</head>

<body>
  <h1><b>VARNISH STATUS</b></h1>
  <div class="container" style="float:left;text-align:left">
    <div class="info">
      <script type="text/javascript">
	var myVar = setInterval(function(){info()}, 1000);
	function info(){
	$.getJSON( "/rtstatus", function( data ) {
	var items = [];	
	var index = 0;
	items.push("<p>" + data.Timestamp + "</p>");
	items.push("<p>"+ "Varnish Version: " + data.Varnish_Version + "</p>");
	items.push("<p>" + "Director name:" + " " + data.Director.name + "</p>" );
	items.push("<p>"+ "VCL name:"+ " " + data.Director.vcl_name + "</p>");
	items.push("<p>"+ "Hitrate:"+ " " + data.hitrate + "%"+ "</p>");
        items.push("<p>"+ "Load:"+ " " + data.load + "req/s"+ "</p>");
	$("div.info").html("");
	$( "<ul/>", {
	"class": "my-new-list",
	html: items.join( "" )
	}).appendTo( "div.info" );
	})();
	};
	info();
      </script>
    </div>
    <h1> Backends</h1>
    <div class="backend">
      <script type="text/javascript">
	var myVar = setInterval(function(){backend()}, 1000);
	function backend(){
	$.getJSON( "/rtstatus", function( data ) {
	var items = [];
	var cont = 0;

	$.each( data, function( key, val ) {
	if(key === "Backend"){
	items.push( "<p>" + "<b>Name:</b> "+val.name+"    "+ val.value+"</p><BR><BR><BR>" );
	}
	});
	$("div.backend").html("")
	$( "<ul/>", {
	"class": "my-new-list",
	html: items.join( "" )
	}).appendTo( "div.backend" );
	})();
	};
	backend();
      </script>
    </div>

    <script>
      function apriSpoiler(id){
      var a = document.getElementById(id).style;
      a.display = a.display=='block'?'none':'block'}
    </script>
    <a href="javascript:apriSpoiler('spoil')">
      <b>Show detailed counters</b></a>
  
      <div id="spoil" class="row" style="display: none;">
        <div class="col-xs-4">
	  <h2>Description:</h2>
	  <p1>qui ci meto i nomi</p1>
	  <script type="text/javascript">
	    $.getJSON( "/rtstatus", function( data ) {
	    var items = [];
	    var cont = 0;
	    $.each( data, function( key, val ) {
	    if(cont>5){
	    if(!val.type){
	    items.push( "<li>"+val.descr+"</li>" );
	    }
	    }
	    cont++;
	    });
	    $("p1").html("")
	    $( "<ul/>", {
	    "class": "my-new-list",
	    html: items.join( "" )
	    }).appendTo( "p1" );
	    })();
	  </script>
	</div>
	
	<div class="col-xs-2">
	  <h2>Name:</h2>
	  <p2>name</p2>
	  <script type="text/javascript" style="float:left">
	    
	    $.getJSON( "/rtstatus", function( data ) {
	    var items = [];
	    var cont = 0;
	    $.each( data, function( key, val ) {
	    if(cont>5){
	    if(!val.type){
	    items.push( "<li>"+ "["+ key+"]"+"</li>" );
	    }
	    }
	    cont++;
	    });
	    $("p2").html("")
	    $( "<ol/>", {
	    "class": "my-new-list",
	    html: items.join( "" )
	    }).appendTo( "p2" );
	    })();
	  </script>
	</div>
	<div class="col-xs-2">
	  <h2>Value:</h2>
	  <p3>value</p3>
	  <script type="text/javascript">
	    var myVar = setInterval(function(){value()}, 1000);
	    function value(){
	    $.getJSON( "/rtstatus", function( data ) {
	    var items = [];
	    var cont = 0;
	    $.each( data, function( key, val ) {
	    if(cont>5){
	    if(!val.type){
	    items.push( "<li>"+val.value+"</li>" );
	    }
	    }
	    cont++;
	    });
	    $("p3").html("")
	    $( "<ol/>", {
	    "class": "my-new-list",
	    html: items.join( "" )
	    }).appendTo( "p3" );
	    })();
	    };
	    value();
	  </script> 
	</div>
      </div>
    </div>


      <hr>
      <div class="row">
	<div class="col-xs-12">
	  <footer>
	    <a href="/rtstatus" target="_blank">Complete JSON file</a><br />

	  
	    <a href="https://github.com/arianna-aondio/libvmod-rtstatus" target="_blank">Github repository</a><br /><br /><br />
	    
	    <p>&copy; Copyright 2014 Varnish Software AS</p> 
	  </footer>
	</div>
      </div>
  </div>
  
</body>
</html>         

